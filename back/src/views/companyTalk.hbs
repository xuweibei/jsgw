{{#>default}}
  <link rel="stylesheet" href="../assets/css/commiucate.css"/>
  <link href="../assets/js/bootstrap-daterangepicker/daterangepicker.css?version"  rel="stylesheet">
  <script type="text/javascript"  src="../assets/js/bootstrap-daterangepicker/moment.min.js"  charset="UTF-8"></script>
  <script type="text/javascript"  src="../assets/js/bootstrap-daterangepicker/daterangepicker.js"  charset="UTF-8"></script>
<div class="job-class-container company-talk-container">
  <div class="job-class-top">
    <span>公司交流</span>
    <button type="button" class="btn">新增</button>
  </div>
  <div>

  </div>
  <div class="table-container">
    <div class="toolbar">
      <form>
        <div class="row row-container">
          <div class="col">
            <input type="text" class="form-control searchWork" placeholder="请输入关键字" name="searchWork">
          </div>
          <div class="col">
              <div class="main">
                  <div class="input-group fl">
                          <button type="button" class="btn btn-default form-control daterange-btn" id="daterange-btn">
                              <span></span>
                          <i class="time_close">X</i>
                          </button>
                          <input type="hidden" value="" id="incomeStartDate">
                          <input type="hidden" value="" id="incomeEndDate">
                      </div>
                  </div>
              </div>
        </div>
      </form>
      <button class="btn btn-primary" id="filterBy">搜索</button>
		</div>
    <table
      id="table"
      class="text-center table table-striped table-borderless"
      data-pagination="true">
      {{!-- <thead>
        <tr>
          <th data-field="id">ID</th>
          <th data-field="name">Item Name</th>
          <th data-field="price">Item Price</th>
        </tr>
      </thead> --}}
    </table>
    <script>
      var $table = $('#table')
        $(function() {
          $table.bootstrapTable({
            toolbar: '.toolbar',
            columns: [{
              title: '展示模块',
              field: 'name'
            }, {
              title: '位置排序(数值越小排的越前)',
              field: 'sort'
            }, {
              title: '状态',
              field: 'opt'
            }],
            data: [{
              name: '最新动态',
              sort: 1,
              opt: operateFormatter()
            },{
              name: '最新动态',
              sort: 1,
              opt: operateFormatter()
            },{
              name: '最新动态',
              sort: 1,
              opt: operateFormatter()
            },{
              name: '最新动态',
              sort: 1,
              opt: operateFormatter()
            }],
          })
          function operateFormatter(value, row, index) {
            return [
              '<a class="like opt" id="table_see" href="javascript:void(0)" title="see">查看</a>',
              '<a class="like opt" id="table_edit" href="javascript:void(0)" title="edit">编辑</a>',
              '<a class="like opt" id="table_hide" href="javascript:void(0)" title="hide">隐藏</a>',
              '<a class="remove opt" id="table_del" href="javascript:void(0)" title="remove">删除</a>'
            ].join('')
          }
        })
    </script>
    <script>
        $(function () {
        $('#daterange-btn span').html('发布开始时间 ~ 发布结束时间');
            $("#incomeStartDate").val(GetDateStr(-2));
            $("#incomeEndDate").val((new Date()).Format("yyyy-MM-dd"));

        $('#daterange-btn').daterangepicker({
                    startDate:moment().subtract(2, 'days'),
                    endDate: (new Date()).Format("yyyy-MM-dd"),
                    locale:{
                        format: 'YYYY-MM-DD',
                        separator: ' ~ '
                    }
                },
                function(start, end,label) {
                    if(end==null){
                        end = start;
                    }
                    $('#daterange-btn span').html(start.format('YYYY-MM-DD')+' ~ '+end.format('YYYY-MM-DD'));
                    if($("#incomeStartDate").val() != start.format('YYYY-MM-DD')&& $("#incomeEndDate").val() != end.format('YYYY-MM-DD')){
                        $(".timeSlot .slot").removeClass("active");
                    }
                    $("#incomeStartDate").val(start.format('YYYY-MM-DD'));
                    $("#incomeEndDate").val(end.format('YYYY-MM-DD'));
                });
        })
      /*获取今天前后的日期*/
        function GetDateStr(AddDayCount) {
            var dd = new Date();
            dd.setDate(dd.getDate()+AddDayCount);//获取AddDayCount天后的日期
            var y = dd.getFullYear();
            var m = (dd.getMonth()+1)<10?"0"+(dd.getMonth()+1):(dd.getMonth()+1);//获取当前月份的日期，不足10补0
            var d = dd.getDate()<10?"0"+dd.getDate():dd.getDate();//获取当前几号，不足10补0
            return y+"-"+m+"-"+d;
        }
        /*选择到账日期区间*/
        function choseTimeSlot(obj,type) {
            $(obj).addClass("active").siblings(".slot").removeClass("active");
            if(type == 0){
                /*昨天*/
                var date = GetDateStr(-1);
                $('#daterange-btn span').html(date+' ~ '+date);
                $("#incomeStartDate").val(date);
                $("#incomeEndDate").val(date);
                $('#daterange-btn').data('daterangepicker').setStartDate(date);
                $('#daterange-btn').data('daterangepicker').setEndDate(date);
            }else if(type == 1){
                /*今天*/
                var date =(new Date()).Format("yyyy-MM-dd");
                $('#daterange-btn span').html(date+' ~ '+date);
                $("#incomeStartDate").val(date);
                $("#incomeEndDate").val(date);
                $('#daterange-btn').data('daterangepicker').setStartDate(date);
                $('#daterange-btn').data('daterangepicker').setEndDate(date);
            }else if(type == 2){
                /*前三天*/
                $('#daterange-btn span').html(GetDateStr(-2)+' ~ '+(new Date()).Format("yyyy-MM-dd"));
                $("#incomeStartDate").val(GetDateStr(-2));
                $("#incomeEndDate").val((new Date()).Format("yyyy-MM-dd"));
                $('#daterange-btn').data('daterangepicker').setStartDate(GetDateStr(-2));
                $('#daterange-btn').data('daterangepicker').setEndDate((new Date()).Format("yyyy-MM-dd"));
            }
        }
      /*格式化日期*/
      Date.prototype.Format = function (fmt) { //author: meizz
        var o = {
            "M+": this.getMonth() + 1,                 //月份
            "d+": this.getDate(),                    //日
            "h+": this.getHours(),                   //小时
            "m+": this.getMinutes(),                 //分
            "s+": this.getSeconds(),                 //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds()             //毫秒
        };
        if (/(y+)/.test(fmt))
            fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var k in o)
            if (new RegExp("(" + k + ")").test(fmt))
                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
        return fmt;
    }


    </script>
  </div>
</div>
{{/default}}
